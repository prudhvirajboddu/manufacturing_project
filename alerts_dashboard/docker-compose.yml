version: "3.8"

services:
  # Flask Backend API for Alerts
  flask-api:
    build: ./flask_backend
    container_name: flask-api
    restart: always
    ports:
      - "5000:5000"
    depends_on:
      - mongodb
    networks:
      - manufacturing_network

  # Streamlit Frontend Dashboard
  streamlit-dashboard:
    build: ./streamlit_frontend
    container_name: streamlit-dashboard
    restart: always
    ports:
      - "8501:8501"
    depends_on:
      - flask-api
    networks:
      - manufacturing_network

networks:
  manufacturing_network:
    external: true  # Uses existing network
